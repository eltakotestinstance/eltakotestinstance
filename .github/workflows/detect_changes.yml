
#diff <(sed '/---/q' file1.txt) <(sed '/---/q' file2.txt)


name: Compare milestone changes
on:
  milestone:
    types: [edited]

jobs:
  compare_changes:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Compare changes
        uses: actions/github-script@v5
        with:
          script: |
            const milestone_number = context.payload.milestone.number;
            const owner = context.repo.owner;
            const repo = context.repo.repo;

            // Fetch the milestone details
            const milestone = await github.issues.getMilestone({
              owner,
              repo,
              milestone_number,
            });

            // Get the current and previous descriptions
            const currentDescription = milestone.data.description;
            const previousDescription = context.payload.changes.description.from;

            // Split the descriptions at the dividing string
            const currentDescriptionSplit = currentDescription.split('---')[0];
            const previousDescriptionSplit = previousDescription.split('---')[0];

            // Compare the descriptions
            if (currentDescriptionSplit !== previousDescriptionSplit) {
              console.log('The descriptions are different');
            } else {
              console.log('The descriptions are the same');
            }
